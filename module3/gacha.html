<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Module 3 ‚Äî Gacha</title>

  <!-- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
  <link rel="stylesheet" href="../module1/global.css">
  <!-- –°—Ç–∏–ª–∏ –º–æ–¥—É–ª—è –≥–∞—á–∞ -->
  <link rel="stylesheet" href="gacha.css">

  <!-- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–µ—Ç–∞/—Ñ–∞–≤–∏–∫–æ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
  <meta name="description" content="Gacha module ‚Äî –ø–æ–∑–¥—Ä–∞–≤–∏—Ç–µ–ª—å–Ω–∞—è –≥–∞—á–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Gustav">
</head>
<body>

  <!-- –í—Å–ø–ª—ã–≤–∞—é—â–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ (–º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –≤ JS) -->
  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å ‚Äî –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Start/Restart/Next) -->
  <header class="module-header">
    <div class="module-controls">
      <button id="btn-start" class="ctrl-btn">Start</button>
      <button id="btn-restart" class="ctrl-btn">Restart</button>
      <button id="btn-next" class="ctrl-btn">Next</button>
    </div>

    <div class="module-title">
      <h1>üéÅ Gacha ‚Äî Pulls</h1>
      <p class="subtitle">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã.</p>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <main id="gacha-app" class="gacha-app">

    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –º–∞—à–∏–Ω–∞ –≥–∞—á–∞ –∏ –≤–∏–∑—É–∞–ª -->
    <section class="gacha-panel" aria-label="Gacha machine area">
      <!-- –§–æ–Ω/–≤–∏–∑—É–∞–ª –º–∞—à–∏–Ω—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) -->
      <div id="gacha-machine" class="gacha-machine" role="img" aria-label="Gacha machine visual">
        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–µ–π—Å / —Å–ª–æ—Ç -->
        <div id="case-frame" class="case-frame">
          <img id="case-image" src="img/cases/neon_case.jpeg" alt="Case" />
          <div id="case-overlay" class="case-overlay"></div>
        </div>

        <!-- –ë–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ -->
        <div class="spin-area">
          <div id="tokens-display" class="tokens-display" aria-live="polite">Tokens: <span id="tokens-count">0</span></div>
          <button id="btn-spin" class="spin-btn" aria-label="Open case">SPIN</button>
          <div class="spin-hint">–ù–∞–∂–º–∏—Ç–µ SPIN, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å</div>
        </div>
      </div>

      <!-- –ê–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–∞–¥–µ–Ω–∏—è) -->
      <div id="result-modal" class="result-modal hidden" role="dialog" aria-hidden="true" aria-modal="true">
        <div class="result-card">
          <button id="result-close" class="result-close" aria-label="Close result">‚úï</button>
          <div id="result-rarity" class="result-rarity"></div>
          <img id="result-image" class="result-image" src="" alt="">
          <div id="result-title" class="result-title"></div>
          <div id="result-desc" class="result-desc"></div>
          <div class="result-actions">
            <button id="btn-close-return" class="btn">–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
        </div>
      </div>
    </section>

    <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –∏—Å—Ç–æ—Ä–∏—è –≤—ã–ø–∞–¥–µ–Ω–∏–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <aside class="side-panel" aria-label="Inventory and logs">
      <div class="panel-block">
        <h3>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å (–Ω–∞–∂–º–∏ –Ω–∞ –≤–µ—â–∏ –¥–ª—è –æ–±–∑–æ—Ä–∞)</h3>
        <div id="inventory" class="inventory-grid" aria-live="polite">
          <!-- –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å—é–¥–∞ -->
        </div>
      </div>

      <div class="panel-block">
        <h3>–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–∞–¥–µ–Ω–∏–π</h3>
        <ul id="pull-log" class="pull-log">
          <!-- –ø—É–Ω–∫—Ç—ã –ª–æ–≥–æ–≤ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∑–¥–µ—Å—å -->
        </ul>
      </div>
     
      <div class="panel-block">
        <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
        <label class="setting">
          <span>–ê–≤—Ç–æ-–∞–Ω–∏–º–∞—Ü–∏—è</span>
          <input id="toggle-anim" type="checkbox" checked>
        </label>
        <label class="setting">
          <span>–ó–≤—É–∫</span>
          <input id="toggle-sound" type="checkbox" checked>
        </label>
      </div>
    </aside>

  </main>

  <!-- –ü–æ–¥–≤–∞–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è) -->
  <footer class="module-footer">
    <small>Gacha module ‚Äî –≤–µ—Ä—Å–∏—è –∞–ª—å—Ñ–∞. –í—Å–µ –∑–≤—É–∫–∏ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –∏–∑ –ø–∞–ø–∫–∏ <code>module3/img</code>.</small>
  </footer>

  <!-- –ê—É–¥–∏–æ (–ø—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞—Ç—å –º–æ–∂–Ω–æ –≤ JS) -->
 <audio id="sfx-spin" src="sfx/spin.mp3" preload="auto"></audio>
<audio id="sfx-win" src="sfx/win.mp3" preload="auto"></audio>
<audio id="sfx-rare" src="sfx/rare.mp3" preload="auto"></audio>
<audio id="sfx-legendary" src="sfx/legendary.mp3" preload="auto"></audio>

  <!-- –°–∫—Ä–∏–ø—Ç –º–æ–¥—É–ª—è (–ª–æ–≥–∏–∫–∞ –≤—ã–ø–∞–¥–µ–Ω–∏–π + –∞–Ω–∏–º–∞—Ü–∏–∏) -->
  <script src="gacha.js" defer></script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
</body>
</html>
